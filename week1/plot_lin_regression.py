######################################################################################
#maker of scatter plot of 2 dataset with a trendline and a calculated mean mean_squared_error

######################################################################################

import googlemaps
import numpy as np

import pandas as pd
from pandas import Series,DataFrame
from bokeh.layouts import gridplot, row, column

from bokeh.io import push_notebook, show, output_file, output_notebook
from bokeh.plotting import figure
from sklearn.metrics import mean_squared_error
from sklearn.linear_model import LinearRegression


output_file("meancontinentXdeviation.html")

data = pd.read_csv("../DATA/ranking_with_country_2018.csv")
nan = 1.8
meancountrylist = [94.433333333333337, 94.866666666666674, 93.533333333333346, 93.266666666666666, 92.0, 91.59999999999998, 90.09999999999998, 89.09999999999998, 88.166666666666671, 87.933333333333337, 86.666666666666671, 87.40000000000002, 86.366666666666674, 86.333333333333329, 86.333333333333329, 86.333333333333329, 86.666666666666671, 83.933333333333337, 82.5, 83.966666666666654, 82.400000000000006, 81.299999999999997, 80.100000000000009, 78.899999999999991, 81.633333333333326, 80.600000000000009, 75.100000000000009, 75.733333333333334, 76.433333333333337, 76.766666666666666, 74.933333333333323, 78.0, 75.433333333333323, 75.033333333333346, 72.333333333333329, 74.433333333333337, 72.166666666666671, 72.200000000000003, 73.466666666666669, 70.533333333333331, 74.299999999999997, 75.533333333333346, 71.200000000000003, 69.833333333333329, 71.399999999999991, 69.966666666666669, 74.0, 67.333333333333329, 68.200000000000003, 70.599999999999994, 69.633333333333326, 69.833333333333329, 70.599999999999994, 67.450000000000003, 68.899999999999991, 68.166666666666671, 67.233333333333334, 67.133333333333326, 69.366666666666674, 66.63333333333334, 68.13333333333334, 64.166666666666671, 67.533333333333331, 65.266666666666666, 66.500000000000014, 67.799999999999997, 64.433333333333337, 66.13333333333334, 63.233333333333327, 60.333333333333336, 63.666666666666664, 61.800000000000004, 62.133333333333326, 61.566666666666663, 63.233333333333327, 61.033333333333331, 60.433333333333337, 60.066666666666663, 60.199999999999996, 60.5, 60.266666666666673, 58.399999999999999, 61.066666666666663, 60.166666666666664, 61.866666666666667, 57.366666666666674, 58.533333333333339, 60.666666666666664, 58.866666666666667, 59.733333333333327, 59.266666666666673, 62.133333333333333, 57.066666666666663, 58.0, 57.599999999999994, 59.20000000000001, 58.06666666666667, 57.233333333333327, 57.466666666666669, 58.866666666666674, 58.233333333333327, 57.300000000000004, 59.466666666666669, 56.800000000000004, 59.566666666666663, 56.966666666666661, 57.899999999999999, 57.966666666666669, 57.199999999999996, 54.900000000000006, 56.899999999999999, 60.066666666666663, 56.400000000000006, 53.899999999999999, 57.533333333333339, 56.433333333333337, 62.533333333333331, 56.599999999999994, 62.233333333333327, 57.066666666666663, 55.5, 57.166666666666664, 53.5, 55.233333333333327, 53.033333333333339, 53.800000000000004, 52.899999999999999, 56.033333333333331, 56.899999999999999, 54.066666666666663, 51.933333333333337, 54.433333333333337, 55.29999999999999, 55.333333333333336, 54.5, 55.133333333333326, 54.800000000000004, 54.666666666666664, 56.366666666666674, 61.399999999999999, 54.666666666666664, 53.566666666666663, 51.666666666666664, 52.366666666666674, 53.899999999999999, 53.233333333333327, 53.233333333333327, 52.966666666666669, 55.5, 57.233333333333327, 54.199999999999996, 51.266666666666673, 51.866666666666674, 54.933333333333337, 51.966666666666669, 51.833333333333336, 52.5, 51.633333333333333, 51.900000000000006, 52.600000000000001, 50.300000000000004, 50.633333333333333, 51.966666666666669, 52.100000000000001, 49.233333333333327, 51.200000000000003, 50.433333333333337, 51.399999999999999, 49.70000000000001, 51.533333333333331, 54.266666666666673, 50.199999999999996, 50.566666666666663, 48.466666666666669, 48.933333333333337, 51.833333333333336, 48.366666666666667, 49.666666666666664, 48.733333333333327, 50.033333333333331, 50.733333333333327, 47.233333333333327, 50.633333333333333, 46.833333333333336, 47.933333333333337, 50.0, 50.266666666666659, 50.066666666666663, 53.800000000000004, 48.033333333333331, 44.233333333333327, 52.29999999999999, 50.0, 50.866666666666667, 52.599999999999994, 49.800000000000004, 46.600000000000001, 45.033333333333339, 47.699999999999996, 47.199999999999996, 45.699999999999996, 47.899999999999999, 46.533333333333331, 43.800000000000004, 48.466666666666669, 44.800000000000004, 53.800000000000004, 45.633333333333333, 43.100000000000001, 43.766666666666673, 48.300000000000004, 48.566666666666663, 46.100000000000001, 44.899999999999999, 51.300000000000004, 46.466666666666669, 45.199999999999996, 44.666666666666664, 46.5, 48.300000000000004, 44.033333333333339, 51.600000000000001, 45.600000000000001, 46.700000000000003, 42.800000000000004, 46.899999999999999, 45.566666666666663, 43.533333333333331, 43.75, 43.399999999999999, 42.833333333333336, 47.099999999999994, 45.533333333333331, 46.899999999999999, 29.200000000000003, 43.600000000000001, 40.0, 42.466666666666669, 41.933333333333337, 52.399999999999999, 45.233333333333327, 45.899999999999999, 47.5, 43.633333333333333, 46.300000000000004, 46.100000000000001, 46.300000000000004, 48.233333333333327, 45.79999999999999, 43.733333333333327, 41.233333333333327, 45.566666666666663, 46.5, 44.466666666666669, 46.766666666666673, 46.733333333333327, 43.966666666666669, 44.399999999999999, 43.100000000000001, 42.766666666666673, 39.266666666666666, 41.100000000000001, 43.766666666666673, 38.800000000000004, 46.233333333333327, 38.899999999999999, 39.333333333333336, 41.100000000000001, 42.733333333333327, 38.233333333333327, 43.066666666666663, 38.833333333333336, 44.899999999999999, 41.166666666666664, 45.133333333333333, 39.833333333333336, 39.233333333333327, 46.766666666666659, 40.399999999999999, 43.100000000000001, 43.833333333333336, 43.333333333333336, 35.600000000000001, 39.366666666666667, 44.233333333333341, 43.800000000000004, 40.533333333333339, 45.400000000000006, 41.333333333333336, 44.966666666666669, 42.933333333333337, 39.100000000000001, 42.033333333333339, 45.266666666666673, 42.366666666666667, 42.000000000000007, 40.300000000000004, 44.200000000000003, 36.100000000000001, 38.5, 41.633333333333333, 42.266666666666673, 41.0, 42.0, 45.766666666666673, 40.233333333333327, 41.466666666666669, 37.366666666666667, 41.166666666666664, 39.666666666666664, 44.199999999999996, 39.766666666666673, 41.099999999999994, 40.533333333333331, 39.466666666666669, 33.299999999999997, 38.833333333333336, 41.133333333333333, 40.833333333333336, 33.833333333333336, 39.06666666666667, 36.900000000000006, 42.0, 39.899999999999999, 40.100000000000001, 36.033333333333331, 37.100000000000001, 39.300000000000004, 34.233333333333327, 34.0, 38.799999999999997, 38.733333333333334, 38.566666666666663, 37.533333333333339, 40.100000000000001, 38.133333333333333, 38.733333333333327, 37.133333333333333, 44.566666666666663, 41.399999999999999, 35.699999999999996, 38.399999999999999, 39.833333333333336, 39.0, 37.233333333333334, 35.666666666666664, 39.266666666666666, 38.833333333333336, 38.5, 39.75, 37.700000000000003, 35.5, 37.733333333333327, 34.666666666666664, 35.966666666666669, 38.033333333333331, 34.766666666666666, 34.366666666666667, 34.56666666666667, 36.75, 36.399999999999999, 36.200000000000003, 38.300000000000004, 36.366666666666667, 36.299999999999997, 34.300000000000004, 36.333333333333336, 38.5, 34.199999999999996, 35.199999999999996, 34.066666666666663, 34.199999999999996, 34.56666666666667, 32.666666666666664, 37.700000000000003, 40.599999999999994, 40.733333333333334, 33.0, 35.266666666666659, 32.800000000000004, 34.799999999999997, 37.399999999999999, 32.300000000000004, 42.300000000000004, 35.700000000000003, 30.0, 33.933333333333337, 39.200000000000003, 35.566666666666663, 39.466666666666669, 33.899999999999999, 39.033333333333331, 37.533333333333331, 34.93333333333333, 34.450000000000003, 44.433333333333337, 35.600000000000001, 36.066666666666663, 33.033333333333339, 35.066666666666663, 37.399999999999999, 36.866666666666667, 33.833333333333336, 36.100000000000001, 30.066666666666663, 34.300000000000004, 31.166666666666668, 32.899999999999999, 22.899999999999995, 33.033333333333331, 27.0, 35.966666666666669, 30.466666666666669, 25.666666666666668, 36.366666666666667, 28.333333333333332, 32.066666666666663, 33.0, 33.899999999999999, 35.0, 30.666666666666668, 27.933333333333334, 27.966666666666669, 34.800000000000004, 33.233333333333327, 25.133333333333336, 29.733333333333334, 31.266666666666666, 31.700000000000003, 31.533333333333331, 33.666666666666664, 34.666666666666664, 33.766666666666666, 33.966666666666661, 32.866666666666667, 31.699999999999999, 30.199999999999999, 29.800000000000001, 29.300000000000001, 28.699999999999999, 25.699999999999999, 26.666666666666668, 25.899999999999995, 30.0, 34.966666666666661, 29.533333333333331, 29.933333333333337, 34.333333333333336, 35.633333333333333, 31.400000000000002, 28.5, 36.133333333333333, 31.400000000000006, 32.366666666666667, 33.699999999999996, 29.566666666666663, 27.599999999999998, 27.800000000000001, 31.833333333333332, 25.433333333333337, 23.433333333333334, 32.733333333333327, 26.566666666666666, 33.450000000000003, 32.866666666666667, 32.0, 32.233333333333327, 27.900000000000002, 28.733333333333334, 33.93333333333333, 31.399999999999995, 29.5, 31.233333333333334, 29.766666666666669, 34.333333333333336, 32.600000000000001, 32.733333333333327, 33.133333333333333, 29.266666666666666, 31.0, 32.300000000000004, 25.866666666666664, 28.466666666666669, 29.366666666666664, 29.899999999999999, 32.666666666666664, 41.0, 31.599999999999998, 27.566666666666666, 32.600000000000001, 31.300000000000001, 33.06666666666667, 27.666666666666668, 27.900000000000002, 32.5, 22.400000000000002, 28.900000000000002, 28.600000000000005, 34.466666666666669, 33.06666666666667, 31.633333333333336, 30.566666666666663, 28.533333333333331, 22.099999999999998, 24.399999999999999, 25.699999999999999, 18.566666666666666, 23.066666666666663, 22.350000000000001, 26.800000000000001, 27.899999999999999, 32.199999999999996, 23.800000000000001, 27.166666666666668, 28.866666666666664, 29.533333333333331, 23.633333333333336, 26.233333333333334, 30.100000000000005, 21.699999999999999, 22.599999999999998, 28.366666666666664, 26.266666666666666, 20.033333333333331, 27.866666666666664, 19.433333333333334, 27.399999999999995, 27.800000000000001, 24.233333333333334, 31.966666666666669, 22.566666666666666, 27.833333333333332, 28.199999999999999, 20.133333333333336, 25.099999999999998, 22.233333333333334, 20.766666666666669, 25.233333333333334, 22.566666666666666, 28.466666666666669, 29.133333333333336, 27.166666666666668, 22.300000000000001, 28.400000000000002, 26.933333333333334, 29.0, 26.699999999999999, 26.966666666666669, 23.833333333333332, 24.566666666666663, 25.199999999999999, 24.133333333333336, 31.333333333333332, 27.300000000000001, 20.0, 23.766666666666666, 25.099999999999998, 27.633333333333336, 23.733333333333334, 19.533333333333335, 19.900000000000002, 26.699999999999999, 24.800000000000001, 35.366666666666667, 26.233333333333334, 28.900000000000002, 22.966666666666669, 26.899999999999995, 22.333333333333332, 23.099999999999998, 19.933333333333334, 20.266666666666666, 22.533333333333331, 24.100000000000001, 22.966666666666669, 21.800000000000001, 18.966666666666669, 23.5, 26.066666666666666, 22.166666666666668, 29.600000000000005, 26.600000000000001, 20.666666666666668, 20.566666666666666, 28.633333333333336, 22.0, 25.699999999999999, 26.799999999999997, 21.699999999999999, 22.533333333333331, 23.199999999999999, 27.366666666666664, 27.666666666666668, 22.533333333333331, 26.199999999999999, 27.966666666666665, 27.133333333333336, 25.833333333333332, 26.666666666666668, 29.566666666666663, 26.833333333333332, 25.366666666666664, 22.149999999999999, 16.5, 17.0, 17.850000000000001, 19.833333333333332, 16.100000000000001, 17.899999999999999, 19.333333333333332, 18.300000000000001, 17.0, 17.300000000000001, 14.199999999999999, 19.649999999999999, 27.699999999999999, 20.600000000000001, 24.066666666666666, 26.766666666666666, 15.4, 21.166666666666668, 14.800000000000001, 17.699999999999999, 15.0, 18.699999999999999, 14.5, 18.133333333333336, 19.0, 16.75, 15.699999999999999, 19.850000000000001, 16.199999999999999, 19.133333333333333, 18.149999999999999, 20.733333333333334, 15.9, 19.699999999999999, 19.633333333333336, 19.699999999999999, 20.700000000000003, 20.066666666666666, 22.0, 20.0, 20.266666666666669, 16.100000000000001, 21.300000000000001, 21.766666666666666, 20.550000000000001, 18.699999999999999, 21.949999999999999, 20.199999999999999, 18.266666666666669, 20.766666666666666, 19.5, 20.800000000000001, 15.1, 19.566666666666666, 16.0, 14.4, 19.099999999999998, 15.4, 13.699999999999999, 16.800000000000001, 18.75, 16.833333333333332, 20.350000000000001, 17.5, 20.0, 15.6, 21.0, 19.966666666666665, 15.300000000000001, 14.199999999999999, 19.850000000000001, 19.300000000000001, 17.199999999999999, 20.733333333333334, 21.366666666666664, 18.533333333333331, 19.833333333333332, 19.433333333333334, 14.199999999999999, 15.800000000000001, 20.166666666666668, 14.199999999999999, 21.050000000000001, 22.133333333333336, 21.0, 15.1, 24.400000000000002, 20.533333333333335, 19.800000000000001, 19.933333333333334, 16.899999999999999, 19.833333333333332, 23.266666666666666, 21.100000000000001, 21.233333333333334, 22.199999999999999, 19.966666666666665, 19.733333333333334, 16.5, 19.199999999999999, 23.600000000000001, 19.633333333333336, 22.699999999999999, 14.699999999999999, 22.25, 28.666666666666668, 18.433333333333334, 16.799999999999997, 16.800000000000001, 18.600000000000001, 20.75, 18.950000000000003, 17.899999999999999, 20.199999999999999, 14.1, 20.100000000000001, 22.166666666666668, 16.149999999999999, 20.666666666666668, 19.166666666666668, 20.800000000000001, 19.149999999999999, 15.199999999999999, 23.200000000000003, 18.699999999999999, 17.100000000000001, 14.1, 23.800000000000001, 17.266666666666666, 20.166666666666668, 24.766666666666666, 19.199999999999999, 19.200000000000003, 14.800000000000001, 16.5, 27.133333333333336, 15.0, 19.5, 17.800000000000001, 21.599999999999998, 15.5, 18.900000000000002, 18.899999999999999, 17.966666666666669, 25.366666666666664, 18.350000000000001, 17.800000000000001, 17.75, 18.366666666666667, 18.300000000000001, 18.899999999999999, 15.0, 17.066666666666666, 15.9, 20.199999999999999, 23.200000000000003, 14.199999999999999, 14.6, 14.1, 18.399999999999999, 19.133333333333329, 16.100000000000001, 20.699999999999999, 16.966666666666665, 19.966666666666669, 22.600000000000005, 15.699999999999999, 17.333333333333332, 18.0, 21.333333333333332, 14.5, 21.100000000000001, 17.699999999999999, 19.966666666666669, 24.900000000000002, 15.300000000000001, 19.0, 19.266666666666669, 19.800000000000001, 18.199999999999999, 14.1, 17.800000000000001, 14.0, 22.099999999999998, 20.766666666666666, 23.633333333333336, 20.533333333333335, 19.300000000000001, 22.800000000000001, 19.149999999999999, 21.099999999999998, 14.699999999999999, 22.033333333333331, 14.6, 19.500000000000004, 17.600000000000001, 21.300000000000001]


deviationlist = [0.68068592855540344, 0.57735026918962573, 0.63508529610859332, 0.80829037686547933, 0.0, 1.7404671430534633e-14, 1.7404671430534633e-14, 1.7404671430534633e-14, 0.23094010767584539, 0.35118845842842555, 1.2858201014657242, 1.7404671430534633e-14, 2.0792626898334285, 0.68068592855540344, 0.68068592855540344, 0.68068592855540344, 1.2858201014657242, 0.057735026918959292, 1.3114877048604046, 1.2503332889007368, 0.0, 1.0, 1.0392304845413247, 1.2124355652982108, 1.8475208614068042, 1.5716233645501687, 2.8478061731796322, 3.059956426705015, 1.4153915830374779, 1.0214368964029747, 2.0207259421636903, 2.0784609690826579, 0.15275252316519219, 0.46188021535169899, 2.4027761721253453, 0.057735026918959292, 1.9347695814575316, 0.34641016151377219, 2.281081614790081, 1.4742229591663982, 1.9052558883257715, 3.059956426705015, 0.95393920141694877, 1.0408329997330665, 0.69282032302755259, 0.30550504633038594, 3.6660605559646733, 2.3115651263447741, 1.6522711641858363, 0.78102496759066198, 0.057735026918967501, 0.28867513459481292, 1.3747727084867467, 2.192031021678293, 0.65574385243019861, 0.057735026918967501, 0.77674534651540206, 0.70237691685684511, 1.9553345834749947, 0.63508529610858511, 1.3316656236958757, 3.3080709383768245, 0.98149545762235713, 1.4433756729740603, 0.6557438524301985, 1.7691806012954123, 2.1939310229205806, 0.77674534651540206, 1.2220201853215569, 2.8307831660749536, 0.56862407030772999, 1.7058722109231996, 0.83266639978645007, 0.73711147958319911, 1.9731531449265001, 1.0263202878893767, 1.2701705922171742, 1.4843629385474904, 1.9974984355438195, 0.79999999999999716, 0.86216781042517232, 2.3065125189341584, 0.6027713773341723, 1.1930353445448876, 1.2096831541082687, 3.1021497922139929, 1.3576941236277542, 1.5044378795195663, 1.0016652800877812, 1.2503332889007368, 0.58594652770823175, 2.1126602503321088, 2.1079215671683182, 0.79999999999999716, 1.3747727084867498, 2.3259406699226024, 0.4725815626252608, 1.1676186592091318, 0.46188021535169899, 1.5885003409925162, 0.49328828623162357, 0.51961524227066236, 1.3650396819628854, 1.1532562594670781, 1.6258331197676279, 1.4433756729740643, 0.17320508075688609, 0.46188021535169899, 1.0440306508910551, 2.4269322199023202, 0.79372539331937764, 2.4826061575153888, 0.70000000000000184, 3.5383612025908264, 0.4725815626252608, 0.49328828623162357, 5.0846173241782253, 1.3747727084867498, 4.8428641663103997, 0.56862407030773388, 0.88881944173155958, 0.92915732431775555, 2.5059928172283339, 0.90184995056458095, 2.592939130279253, 2.5534290669607409, 2.6457513110645907, 0.1154700538379268, 1.0535653752852747, 2.5813433195399096, 3.370954365359065, 1.3203534880225583, 0.45825756949558666, 0.50332229568471676, 2.0223748416156662, 0.37859388972001551, 0.79372539331937775, 0.70945988845975805, 1.5275252316519468, 6.6640828326184529, 0.66583281184793786, 0.73711147958319911, 2.4006943440041097, 1.6072751268321592, 0.1732050807568902, 1.1547005383792517, 0.57735026918962573, 1.5307950004273352, 1.9697715603592234, 3.7072002014098624, 1.2529964086141667, 1.5567059238447494, 1.4571661996262908, 2.3797758998135392, 0.68068592855540344, 0.73711147958319911, 1.5099668870541503, 0.89628864398325059, 0.62449979983983783, 0.43588989435406539, 1.3892443989449796, 1.1015141094572196, 0.30550504633038672, 2.0999999999999988, 2.0550750189064475, nan, 1.1547005383792517, 0.60827625302982247, 1.2288205727444521, 1.2096831541082687, 2.7428695436227586, 0.69999999999999929, 0.92915732431775788, 2.2722969289539017, 2.0744477176668781, 2.2233608194203045, 2.0404247923737193, 0.97125348562223013, 3.1564748269760234, 1.0598742063723106, 1.5695009822658066, 2.6083200212652846, 0.92376043070340208, 2.8307831660749536, 2.5890796305508506, 0.1732050807568902, 0.72341781380702552, 0.2309401076758536, 3.5538711287833715, 1.5044378795195679, 5.5590766619406633, 2.8000000000000007, 0.51961524227066236, 1.3650396819628863, 4.6669047558312142, 0.72111025509279725, 2.3895606290697056, 3.9551653989856517, 1.0583005244258366, 1.4730919862656227, 1.9052558883257633, nan, 1.5044378795195679, 2.4248711305964297, 0.63508529610858921, 0.4358898943540695, 4.9365980188789935, 2.0526405757787534, 2.0223748416156702, 3.7166292972710253, 0.69282032302755259, 1.3316656236958788, 1.385640646055101, 3.4641016151377544, 6.3221831672294977, 0.1154700538379268, 1.2124355652982148, 3.8527046776690974, 2.0518284528683202, 2.5357444666211939, 1.6258331197676241, 6.1538605769061752, 0.4358898943540695, nan, 1.9974984355438168, nan, 1.1547005383792517, 1.7897858344878408, 3.3234018715767757, 8.6377080293327797, 1.7039170558842738, 1.4106735979665868, 1.7214335111567132, 2.1213203435596424, 15.508384828859517, 4.2930175867331348, 5.3394756296849959, 3.0664855018951802, 3.0237945256470935, 3.4176014981270146, 1.3279056191361376, 2.705549851693736, 1.9974984355438152, 1.379613472438326, 0.43588989435406539, 0.81853527718724184, 0.30000000000000071, 1.4364307617610137, 0.8660254037844386, 0.92376043070339797, 3.442867022313429, 3.3486315612998276, 0.8660254037844386, 0.46188021535169899, 3.6896250938724546, 2.7153882472555062, 1.1676186592091318, 3.2046840717924159, 0.964365076099297, 1.5011106998930268, 1.1590225767142475, 2.3895606290697056, 0.11547005383792268, 2.8792360097775931, 2.0816659994661331, 1.7578395831246927, 1.9857828011475294, 0.1732050807568902, 2.4440403706431133, 2.5696951829610719, 2.358671942711263, 2.5579940057266239, 2.0784609690826539, 1.6258331197676268, 1.3650396819628854, 1.5044378795195674, 2.4337899115029069, 4.4015148907317529, 1.5620499351813304, nan, 1.6623276853055597, 2.5106440076867389, 6.1991934959315493, 1.331665623695877, 2.3180451534284927, 2.9000000000000017, 1.3316656236958788, 1.6999999999999993, 2.7209067116190018, 2.4214320831551999, 2.6764404221527744, 3.7161808352124086, 6.7884706181387671, 3.0746273486933862, 1.2583057392117916, 0.72111025509279725, 1.3527749258468695, nan, 8.4326745460737431, 2.4248711305964257, 0.83864970836060793, 2.1197484127446207, 1.0440306508910575, 0.70000000000000284, 4.4003787715756175, 1.5011106998930277, 2.7501515109777741, 1.1015141094572218, 1.0969655114602883, 1.4224392195567885, 3.9153543900903771, 0.28867513459481292, 2.4269322199023189, 2.9871948937646038, 1.0969655114602883, 4.4395945760846223, 1.1676186592091349, 1.1015141094572218, 2.3180451534284918, 5.1617180602327881, 0.72341781380702153, 1.6703293088490085, 1.7320508075688772, nan, 0.34641016151377219, 2.5106440076867393, 1.9287301521985889, 0.88881944173155669, 4.483674088661366, 4.5033320996790813, nan, 0.11547005383792269, 0.057735026918963393, 1.0408329997330663, 3.0347981810987035, 2.4006943440041106, 1.7039170558842736, 2.779088579612627, 5.1003267869160451, 1.0392304845413247, 4.7623523599162612, 2.3811761799581306, 0.46188021535170304, nan, 2.4826061575153933, 5.3003144560802538, 1.1015141094572196, 0.85049005481153561, nan, 2.192031021678293, 0.8660254037844386, nan, 2.1007935008784955, 4.4747439405326128, 0.81445278152470701, 1.2858201014657269, 2.8041635710730817, 1.1503622617824918, 2.9143323992525851, 0.63639610306789685, 0.75498344352707492, 1.6462077633154357, 1.0440306508910551, 0.83864970836060793, nan, 2.4576411454889029, 0.90184995056458095, 0.75498344352707492, 2.0074859899884747, 3.1240998703626608, 1.2662279942148378, 1.3114877048604008, 3.4019602192461535, 6.4763672945049473, nan, 3.6592348927063978, 4.7721413781795432, 4.6130250378683186, 2.1031722072463124, 3.0643106892089103, 3.9686269665968839, 1.8083141320025093, 3.0512292604784732, 4.6357307945997022, 0.42426406871192951, 7.7781745930520225, 1.8009256878986806, 1.0535653752852743, 1.8556220879622387, 1.7214335111567158, 3.1176914536239804, 1.3613718571108095, 2.136195996001617, 3.0924639582917259, 3.7476659402887025, 6.4002604113686905, nan, 0.8962886439832507, 3.9803684921541294, 3.87341365378568, 0.91651513899117021, 0.56862407030773288, 1.4433756729740643, 1.4933184523068062, 5.1694616096198382, 0.96436507609929445, 1.5011106998930257, 1.7521415467935251, 7.649182962905253, 2.5403411844343524, 4.3840620433565967, 2.3028967265887834, 2.8936712552280919, 5.8773576829501657, 2.4090108620206196, 1.069267662156363, 2.2678918257565388, nan, nan, nan, 4.4814432199162511, 3.0989245446337246, 2.4027761721253471, 2.0074859899884747, 0.30550504633038983, 5.5410588639116032, 3.1564748269760257, 2.6839026311200871, 3.0315012782448236, 2.2188585654190152, 1.6653327995729061, 2.37135685491099, 0.46188021535169899, 2.4542480178933266, 1.2220201853215584, nan, 1.0, nan, 3.7322915213043042, 4.3714985988788762, 6.7579582715491817, 3.1895663237081826, 6.4257295305669366, 1.6643316977093225, 0.58594652770823319, 4.2394968254892387, 5.3003144560802564, 3.0664855018951815, 2.5383721817994589, 4.6604720790924192, 2.5159491250818244, 2.0207259421636903, 2.8792360097775953, 1.9087517736293873, 0.81853527718724572, 4.8045117684665248, 3.2741411087489793, 5.7026309717533019, 3.2331615074619049, 6.3705049512054641, 8.2809017222361305, 1.9347695814575256, 3.4122328955294563, 0.7778174593052033, 0.85049005481153961, 1.8193405398660265, 1.464012750399849, 4.4305755833751439, 3.412232895529455, 2.4684678108764828, 1.4106735979665872, 1.9052558883257655, 4.0991869112463437, 4.9074772881118189, 1.0263202878893767, 2.2538855339169315, 1.8036999011291586, 1.6165807537309536, 3.0435724623102587, nan, 0.9848857801796097, 4.0501028793517495, 2.3094010767585034, 4.5610671265980427, 2.9698484809834991, 1.5307950004273367, 5.9632206063502302, 2.5159491250818249, 3.5795716689756798, 1.9052558883257633, 2.4515301344262519, 3.0022213997860518, 3.0664855018951793, 2.3643180835073783, 0.98994949366116802, 8.1074040234837188, 3.2357379374726878, 2.2912878474779199, 3.1564748269760265, 2.1733231083604054, 2.6558112382722796, 2.8867513459481287, 0.90737717258774608, 4.7031904065219399, nan, 1.5588457268119893, 5.1189191567491408, 2.4131583730317701, 2.4748737341529163, 0.0, nan, 6.2553976692133642, 5.565069631190612, 1.6165807537309524, 0.23094010767584949, 3.5232560697930175, 6.6980096546163121, 2.3671361036774665, 2.7999999999999989, 3.2908965343808667, 3.4394767043839676, 0.46188021535169899, 1.9087517736293866, 5.5581771592252567, 1.7897858344878388, 7.1591433379513587, 1.1789826122551581, 1.6093476939431077, 8.6892654081535188, 3.2807519463277535, 4.7920072342738944, 2.2188585654190152, 0.17320508075688609, 6.8244657910589108, 2.8513154858766505, 7.0684746114938646, 5.0083264004389072, 4.4557079497351859, 2.1455380055672126, 2.6083200212652833, 1.379613472438324, 1.8823743871327332, 3.2046840717924141, 0.81853527718724572, 2.2854612955229259, 4.0447496832313385, 1.473091986265624, 1.4153915830374768, 0.50332229568471654, 3.9017090272511763, 1.6522711641858305, 3.5004761580866872, 3.098924544633725, 1.1532562594670781, 5.4561891462814964, 6.2179846681487829, 0.69282032302755048, 2.5403411844343546, 2.6633312473917568, 4.775283586692348, 7.2194182591120191, 0.51961524227066236, nan, 8.4571468790209217, 2.4826061575153915, 5.0999999999999996, 1.8770544300401444, 2.5709920264364876, 2.1939310229205775, 7.0164093381159001, 5.2012818932772067, 5.4372174256078196, 1.3650396819628854, nan, 3.0435724623102578, 5.6568542494923806, 4.5357836515130812, 3.407345007480163, 6.6680831828444775, 3.9703064533274168, 4.386342439892263, nan, 3.6226141573915007, 7.3663650013648754, 4.6543886100467935, 1.7578395831246947, 1.3892443989449799, 0.95393920141694666, 6.6730802482811491, 2.610236260060252, 2.6514147167125715, 2.5696951829610719, 1.3576941236277522, 2.3288051299611423, 2.2516660498395407, 5.0934598588124089, 3.5232560697930162, 2.3094010767585034, 2.1221058723196018, 4.1198705481280999, 1.2055427546683428, 3.5907288025320616, 8.4145706961199167, nan, 1.1357816691600555, 1.9091883092036777, 1.9295940851208404, nan, nan, 2.99054064231425, 1.9697715603592194, nan, nan, nan, 1.0606601717798212, 6.3316664473106927, nan, 0.41633319989322509, 5.5193598662646854, 1.6970562748477156, 1.1547005383792515, nan, nan, nan, 4.7791212581394076, nan, 2.7135462651912405, nan, 3.1819805153394638, nan, 1.2020815280171302, nan, 0.23094010767584949, 3.4648232278140845, 0.0577350269189634, nan, 3.6592348927063978, 4.0550380187284727, nan, 0.141421356237309, 3.8527046776690961, nan, nan, 0.49328828623162563, nan, 1.946792233393178, 1.8610033136277142, 2.0506096654409869, nan, 2.7577164466275343, 0.26457513110645881, 1.9295940851208397, 2.30723499742296, nan, 2.7404379212089438, nan, 0.61101009266077999, 1.2727922061357848, nan, 4.4305755833751439, nan, nan, 4.7759815745038221, 6.2932503525602721, 3.4789845261704362, 2.7577164466275366, nan, nan, nan, 0.28284271247461801, 2.7135462651912428, nan, nan, 0.21213203435596475, nan, 2.7712812921102028, 0.80829037686547522, 3.0022213997860554, 1.6862186493255642, 1.9425069712444625, 0.90737717258774508, nan, nan, 2.2030282189144419, nan, 1.0606601717798212, 3.059956426705015, 1.8384776310850246, nan, 8.793179174792245, 4.7500877184882944, 0.26457513110645947, 2.3671361036774665, nan, 3.4268547289509286, 0.30550504633039016, 2.9698484809834991, 2.0404247923737189, 4.5033320996790795, 3.0022213997860536, 3.5921210076128194, nan, nan, nan, 4.2723919920032323, 1.0392304845413247, nan, 2.3334523779156049, 6.035174672976197, 1.955334583474996, 0.141421356237309, nan, 2.6870057685088811, 2.0506096654409869, 2.6162950903902251, nan, 0.42426406871192951, nan, nan, 0.057735026918961346, 1.3435028842544419, 5.9500700275991143, 4.6500896048714306, 0.43588989435406744, 1.4849242404917484, nan, 0.84852813742385647, 3.6755951898978214, nan, nan, nan, 3.5019042438840811, 0.55075705472860914, 0.95043849529221613, nan, 1.9798989873223336, nan, nan, 5.2319531088622471, nan, 4.3577517139001847, nan, 1.8681541692269399, nan, 4.4911023145771241, 1.6093476939431073, 2.5813433195399118, 1.4742229591663989, 3.1819805153394638, nan, 0.63639610306789174, 2.1361959960016161, nan, 1.8384776310850222, nan, 3.7421027956662734, nan, nan, 0.95393920141694666, nan, nan, nan, nan, 0.70237691685685033, 0.0, 0.0, 2.1361959960016148, 0.63508529610858711, 0.40000000000000041, nan, 4.2335957923889387, 3.4698703145794942, 5.2652951800761683, nan, 0.56568542494923857, nan, 5.0895317400850679, 1.9672315572905994, nan, 1.6970562748477132, 2.9704096238285622, 1.6093476939431077, 2.5238858928247918, nan, nan, nan, 1.0392304845413269, 1.2701705922171762, 0.75055534994651385, 4.7056703383612986, nan, 0.78102496759066631, 5.7275649276110352, 1.385640646055101, nan, 2.193931022920578, nan, 3.2908965343808667, nan, 0.0]


newmeancountrylist = []
newdeviationlist = []


for item in meancountrylist:
    newitem = float(item)
    newmeancountrylist = newmeancountrylist + [newitem]
print(newmeancountrylist)

for item1 in deviationlist:
#    if not item1:
#        item1 = 2
    newitem1 = float(item1)
    newdeviationlist = newdeviationlist + [item1]

print(newdeviationlist)

# Set up X as median room values and use Use vstack to make X two-dimensional
# Remember that X normally is (N,) instead of (N,1).
X = np.vstack(newmeancountrylist)

# Set up Y as the target price of the houses.
Y = newdeviationlist

# Creating [X 1] (remember the useful np.ones function from the first notebook?)
X = np.vstack(newmeancountrylist)
X = np.column_stack((X, np.ones(X.shape[0])))

# Now get out m and b values for our best fit line
a, b = np.linalg.lstsq(X, Y)[0]
print(a, b)

f = figure(plot_width=1000, plot_height=500)

# Create a scatter-plot
f.scatter(newmeancountrylist, newdeviationlist)

# Create the line
x = pd.Series(newmeancountrylist)
#x = list(newlist)
f.line(x, a * x + b, color='red')

## Add some axis information
f.xaxis.axis_label = 'average score per country through the years'
f.yaxis.axis_label = "deviation in average through the years"

show(f)

from sklearn.metrics import mean_squared_error
r = np.array(newdeviationlist)
x = np.array(newmeancountrylist)
y = a * x + b
print(len(x))
smse = sum((r-y) **2) / len(x)
print(smse)
rmse = np.sqrt(smse)
print(rmse)


mse = mean_squared_error(r, y)
print(mse)
